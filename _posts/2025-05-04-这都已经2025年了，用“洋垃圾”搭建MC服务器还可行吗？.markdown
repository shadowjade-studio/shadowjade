---
layout: post
title:  "这都已经2025年了，用“洋垃圾”搭建MC服务器还可行吗？"
date:   2025-05-04 00:00:00 +0800
---
# 这都已经2025年了，用“洋垃圾”搭建MC服务器还可行吗？
## 引言
2025年，云服务器市场呈现出一片勃勃生机、万物竞发的场面，各大厂商与专注 MC 的云服务提供商百花齐放。各类云服务器方案也以其便捷性、弹性扩展、技术支持等优势，早已在在 MC 服务器领域占据了一席之地。那么，在云端方案日益丰富的当下，我们是否还需要自行搭建一台物理机来搭建 MC 服务器呢？  
生命不息，折腾不止，作为一个MC牢玩家和热爱折腾的垃圾佬，本次我们就来玩一下蓝色巨人的远古圣遗物——Intel Xeon E5-2696 v3  
> 注：本文讨论的核心是在低预算下，搭建一个可以 7x24 小时稳定运行的小型 MC 服务器。

## 硬件配置与测试环境

MC服务器的流畅运行很大程度上取决于CPU的性能，并且MC是一个很吃单核性能的游戏，因此我们需要挑选一块主频较高的处理器。对比来看，E5-2666 V3 其实更适合开MC服务器，并且价格更低，但是由于我有家庭服务器的需求，需要用到多开虚拟机等功能，因此我选择了多核性能更强的E5-2696 V3。

|           | E5-2666 V3 | E5-2696 V3 |
| --------- | ---------- | ---------- |
| **核心数量**  | 10         | 18         |
| **线程数量**  | 20         | 36         |
| **CPU主频** | 2.9 GHz    | 2.3 GHz    |
| **单核睿频**  | 3.5 GHz    | 3.8 GHz    |
| **全核频率**  | 3.2 GHz    | 2.8 GHz    |
| **三级缓存**  | 25 MB      | 45 MB      |
| **TDP**   | 135W       | 145W       |
| **某鱼售价**  | 73         | 220        |

**说明:**

*   **CPU主频:**  CPU 的基础时钟频率。
*   **单核睿频:**  CPU 在单核负载下可以达到的最高频率。
*   **全核频率:**  CPU 在所有核心都满载的情况下可以达到的频率。
*   **TDP (Thermal Design Power):**  CPU 的热设计功耗，表示 CPU 在正常工作负载下产生的最大热量。  数值越高，需要的散热能力越强。

> **注意事项:**
>*   在实际使用中，E5 系列的洋垃圾CPU在多数应用场景下无法稳定运行在单核最高睿频，服务器的稍微负载高一点，CPU频率就会掉到全核频率。我的建议是直接看它的全核频率而不是单核睿频。
>*   本次的测试不采取鸡血等方式提高CPU性能。
>*   “受到特朗普对等关税影响”，E5-2666 V3的价格从3月的43元涨到了4月的73元。

### 硬件配置清单

| 部件名称       | 型号/规格                   | 单价 (元) | 数量  | 总价 (元)   |
| ---------- | ----------------------- | ------ | --- | -------- |
| CPU + 主板套装 | E5-2696 V3 板U套装         | 492    | 1   | 492      |
| 内存条        | 三星 DDR3 服务器内存 16GB 1866 | 36     | 4   | 144      |
| 固态硬盘 (SSD) | 1TB SSD                 | 348    | 1   | 348      |
| 散热器        | 六热管下压式散热器               | 65     | 1   | 65       |
| **总计**     |                         |        |     | **1049** |

电源和机箱都使用的是我手头多出来的，由于服务器将安装 Proxmox 系统，日常管理可以通过网页进行，因此显卡仅在系统安装时需要，临时从主力机借用一下即可。

### 软件环境说明

>Proxmox VE 是一款免费开源的服务器虚拟化平台，能让你在一台物理机上同时运行多个独立的“虚拟电脑”（虚拟机或容器），从而提高资源利用率、降低成本。你可以用它轻松创建、管理、备份这些虚拟环境，实现应用隔离，甚至在不停服务的情况下将它们迁移到其他服务器上。Proxmox VE 拥有虚拟机（KVM，可运行各种操作系统）和容器（LXC，更轻量级的Linux环境）两种虚拟化“绝招”，无论个人还是企业，都能用它更高效地管理服务器。

由于使用了虚拟机，可能会导致一定的性能下降（大概5%的性能损失），如果只是用来开MC服务器的话可以使用其他的系统以获得更好的性能。

本次测试将在 Proxmox VE 虚拟化环境中运行 Windows Server 2022，使用 Java 22 和 Paper 1.21.4 作为 Minecraft 服务器核心，并为 Java 进程分配最大 16GB 内存。

### 测试环境细节
**客户端环境：** Minecraft 1.21.4 (Fabric 版本)  并安装Spark对性能进行分析。

**服务器压力测试内容：**

* 单人最高视距创造模式飞行跑图 
* 单人长距离传送
* 百万船吸刷怪塔

**对比组：** 为更好评估服务器性能，将与一台成本相近的小米游戏本 (i5-7300HQ, 16GB 内存, 某鱼1200上下) 进行对比测试。

| 处理器        | i5-7300HQ | E5-2696 V3 |
| ------------- | ----------- | ----------- |
| **核心数量**    | 4           | 18          |
| **线程数量**    | 4           | 36          |
| **CPU主频**   | 2.5 GHz     | 2.3 GHz     |
| **单核睿频**    | 3.5 GHz     | 3.8 GHz     |
| **全核睿频**    | 3.1 GHz     | 2.8 GHz     |
| **三级缓存**    | 6 MB        | 45 MB       |
| **TDP**     | 45W         | 145W        |

## 测试结果

### 地图加载性能对比

以下图片展示了 E5-2696 V3 和 i5-7300HQ 在地图加载方面的性能对比。

**E5-2696 V3:**

![E5-2696 V3 地图加载 1](/assets/img/e5vsi5/e5-load-1.webp)

![E5-2696 V3 地图加载 2](/assets/img/e5vsi5/e5-load-2.webp)

**i5-7300HQ:**

![i5-7300HQ 地图加载 1](/assets/img/e5vsi5/i5-load-1.webp)

![i5-7300HQ 地图加载 2](/assets/img/e5vsi5/i5-load-2.webp)

>**TPS (Ticks Per Second)：**
>
>*   **定义：**  TPS 是 Minecraft 服务器每秒处理的游戏逻辑 Tick 的数量。 默认情况下，Minecraft 服务器的目标 TPS 是 20。
>*   **重要性：**  TPS 是衡量服务器性能的关键指标。 如果服务器的 TPS 稳定在 20 左右，玩家的游戏体验会比较流畅。 如果 TPS 降低到 20 以下，玩家会感受到卡顿、延迟等问题。
>*   **统计指标：**
>*   **1m (1 分钟平均 TPS)：**  过去 1 分钟内的平均 TPS 值，反映了服务器在较短时间内的性能表现。
>*   **5m (5 分钟平均 TPS)：**  过去 5 分钟内的平均 TPS 值，反映了服务器在中等时间内的性能表现，可以平滑掉一些短时间的波动。
>*   **15m (15 分钟平均 TPS)：**  过去 15 分钟内的平均 TPS 值，反映了服务器在较长时间内的性能表现，更加稳定可靠。
>
>**MSPT (Milliseconds Per Tick)：**
>
>*   **定义：**  MSPT 是服务器处理一个游戏逻辑 Tick 所需的平均毫秒数。 MSPT 可以更直观地反映服务器的性能压力。
>*   **计算方式：**  MSPT = 1000 毫秒 / TPS
>*   **重要性：**  MSPT 越低，说明服务器的性能越好。 理想情况下，MSPT 应该低于 50 毫秒。
>*  **统计指标：**
>*   **min (最小值)：**  在统计时间段内，MSPT 的最小值，反映了服务器在最佳状态下的性能。
>*   **med (中位数)：**  在统计时间段内，MSPT 的中位数，可以消除极端值的影响，更准确地反映服务器的平均性能。
>*   **95%ile (95 分位数)：**  在统计时间段内，95% 的 Tick 的 MSPT 都低于这个值。 可以反映服务器在绝大多数情况下的性能。
>*   **max (最大值)：**  在统计时间段内，MSPT 的最大值，反映了服务器在最差状态下的性能。 

跑图测试时长约为 2 分钟，因此我们重点关注 1 分钟内的平均 TPS。测试数据显示，两款 CPU 的平均 TPS 均能稳定在 20。在 MSPT 方面，E5-2696 V3 的 95%ile 值为 17.9ms，i5-7300HQ 的 95%ile 值为 6.62ms；但是E5-2696 V3 的 MSPT Max 值为 280ms，低于 i5-7300HQ 的 410ms。但在实际测试中，E5-2696 V3 的地图加载流畅度明显优于 i5-7300HQ。i5-7300HQ 存在地图加载速度滞后于创造飞行速度的问题，导致需要频繁停顿等待区块加载，而 E5-2696 V3 的地图加载速度始终大于创造飞行速度，不存在会虚空区块的情况。
### 长距离传送性能对比

以下图片展示了 E5-2696 V3 和 i5-7300HQ 在长距离传送后的性能对比。

**E5-2696 V3:**

![E5-2696 V3 长距离传送 1](/assets/img/e5vsi5/e5-tp-1.webp)

![E5-2696 V3 长距离传送 2](/assets/img/e5vsi5/e5-tp-2.webp)

**i5-7300HQ:**

![i5-7300HQ 长距离传送 1](/assets/img/e5vsi5/i5-tp-1.webp)

![i5-7300HQ 长距离传送 2](/assets/img/e5vsi5/i5-tp-2.webp)

在长距离传送下，i5-7300HQ 的表现极差，区块加载需要非常长的时间，i5-7300HQ 的 TPS 无法稳定在 20，下降至 16.72，同时 MSPT Max 值飙升至 5770ms，服务器也出现了overload提示。相比之下，E5-2696 V3 的表现相对稳定，地图加载速度还是比较快的，TPS 仍能稳定在20，MSPT Max 值为 696ms，95%ile 值为 13.1ms (甚至优于之前的跑图测试)。不过这次测试出现了一个很奇怪的现象，i5-7300HQ MSPT 居然随着TPS的减小而减小，这是很不正常的现象。
### 百万船吸刷怪塔性能对比

以下图片展示了 E5-2696 V3 和 i5-7300HQ 在运行百万船吸刷怪塔时的性能对比。

**E5-2696 V3:**

![E5-2696 V3 刷怪塔 1](/assets/img/e5vsi5/e5-sg-1.webp)

![E5-2696 V3 刷怪塔 2](/assets/img/e5vsi5/e5-sg-2.webp)

**i5-7300HQ:**

![i5-7300HQ 刷怪塔 1](/assets/img/e5vsi5/i5-sg-1.webp)

![i5-7300HQ 刷怪塔 2](/assets/img/e5vsi5/i5-sg-2.webp)

在该项测试中，i5-7300HQ 表现较为良好，TPS 居然能勉强稳定在20左右，95%ile 值为 53ms，还算是比较流畅。相比之下 E5-2696 V3 在百万船吸刷怪塔的攻势下尽现颓势，服务器的 TPS 来到了可怜的 13.81，95%ile 值也大幅上升至 91.4ms。

### 功耗测试

为了准确评估 E5-2696 V3 和 i5-7300HQ 的实际功耗，本次测试使用智能插座记录了它们的用电情况。
以下图片展示了 E5-2696 V3 和 i5-7300HQ 的功耗对比情况。 为了更直观地展示 E5-2696 V3 在不同负载下的功耗差异，我们将其待机和高负载功耗图并排展示。

<table style="width:100%;">
  <tr>
    <th style="text-align:center;">E5-2696 V3 (待机)</th>
    <th style="text-align:center;">E5-2696 V3 (高负载)</th>
  </tr>
  <tr>
    <td style="text-align:center;"><img src="/assets/img/e5vsi5/e5-low.webp" alt="E5-2696 V3 待机功耗" style="width:80%;"></td>
    <td style="text-align:center;"><img src="/assets/img/e5vsi5/e5-high.webp" alt="E5-2696 V3 高负载功耗" style="width:80%;"></td>
  </tr>
</table>

**i5-7300HQ:**

<table style="width:100%;">
  <tr>
    <th style="text-align:center;">i5-7300HQ (待机)</th>
    <th style="text-align:center;">i5-7300HQ (高负载)</th>
  </tr>
  <tr>
    <td style="text-align:center;"><img src="/assets/img/e5vsi5/i5-low.webp" alt="i5-7300HQ 待机功耗" style="width:80%;"></td>
    <td style="text-align:center;"><img src="/assets/img/e5vsi5/i5-high.webp" alt="i5-7300HQ 高负载功耗" style="width:80%;"></td>
  </tr>
</table>

**测试结果：**

*   **E5-2696 V3：** 待机功耗约为 90W，高负载时可达 140W 左右。
*   **i5-7300HQ：** 待机功耗约为 10W，高负载不超过 50W。

为直观展示功耗对成本的影响，本次将对 E5-2696 V3 和 i5-7300HQ 的电费成本进行估算。 考虑到小型服务器多数时间处于待机状态，我们采用待机功耗进行计算，暂不考虑各地电费差异、阶梯电价和峰谷电价等因素，统一按 0.75 元/度计算（一般来说没这么多，这个值是偏大的）。


**电费估算 (基于 0.75 元/度)：**

*   **E5-2696 V3 (待机)：**
    *   每日用电量：2.16 度
    *   每日电费：1.62 元
    *   每年用电量：788.4 度
    *   每年电费：591.3 元

*   **i5-7300HQ (待机)：**
    *   每日用电量：0.24 度
    *   每日电费：0.18 元
    *   每年用电量：87.6 度
    *   每年电费：65.7 元

## 结论

我觉得这玩意儿到底还是见仁见智吧，在低成本情况下，用二手洋垃圾攒出来的服务器也不是不能用，虽然这台服务器在某些方面还比不过二手笔记本（笔记本自带电池相当于自带UPS）  
不过话说回来 E5-2696 V3 并不是最适合用来开服的洋垃圾，其实拿E5-2666 V3 用来和 i5-7300HQ 进行对比才是更合理的，不过现在2666涨价如此严重，建议再观望观望。  
最后希望这篇文章能够对你有帮助。

--- 
**联系作者：** 蓝枫 ([lanfeng@shadowjade.studio](mailto:lanfeng@shadowjade.studio))